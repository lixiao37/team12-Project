<html>
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script type="text/javascript">
	$(document).ready(function(){
		// ----------general function declarations-----------
		/**
		 * gets data from a page, then displays the data to a 
		 * area(the div id) located in the web page
		 */
		function display_data(page, area) {
			$.get(page, 
				function(data) {
					e = document.getElementById(area);
					e.innerHTML = data;
				}
			);
		}

		/**
		 * sends the string in the textbox to a page which
		 * will then modify the data depending on mod_type
		 */
		function modify_data(page, textbox_name, mod_type) {
			// modifies the user's source/target list
			$.post(page, {value:$(textbox_name)[0].value, 
				list_type:textbox_name, mod_type:mod_type}, 
				function(status_message){
					// alerts the status
					alert(status_message);
				}
			);
			// displays the updated list from the database to the page
			if (textbox_name == "#sources") {
				display_data('/track_sources', 'sourcelist');}
			else if (textbox_name == "#targets") {
				display_data('/track_targets', 'targetlist');}
		}
		// --------general function declarations end----------


		// ---------button click function declarations--------
		$("#add_sources").click(function(){
			modify_data("/modify_data", "#sources", "add");
		});

		$("#delete_sources").click(function(){
			modify_data("/modify_data", "#sources", "delete");
		});

		$("#add_targets").click(function(){
			modify_data("/modify_data", "#targets", "add");
		});

		$("#delete_targets").click(function(){
			modify_data("/modify_data", "#targets", "delete");
		});
		// ------button click function declarations end--------


		// when page starts up, display the sources and targets lists
		display_data('/track_sources', 'sourcelist');
		display_data('/track_targets', 'targetlist');

	});
</script>
	<body bgcolor="pink">
		<center>
		<h1 style="color:#0033CC">This is for tracking!</h1>
		Add the website sources below. <br/>
		<input type="text" id="sources"/><br/>
		<button id="add_sources">Add Sources</button>
		<button id="delete_sources">Delete Sources</button>
		<br/>
		<ul style="list-style-type:decimal;text-align:left;margin-left:44%;">
		<div id="sourcelist"></div>
		</ul>
		<br/>
		Add the website targets below. <br/>
		<input type="text" id="targets"/><br/>
		<button id="add_targets">Add Targets</button>
		<button id="delete_targets">Delete Targets</button>
		<br/>
		<ul style="list-style-type:decimal;text-align:left;margin-left:47%;">
		<div id="targetlist"></div>
		</ul>
		<br/>
		<input type="button" value="Back" onClick="location='/'"/>
                </center></body>
</html>